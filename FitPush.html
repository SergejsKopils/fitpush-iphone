<!doctype html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<meta name="theme-color" content="#000000" />
<title>FitPush</title>

<style>
:root{
  --safe-top: env(safe-area-inset-top);
  --safe-bot: env(safe-area-inset-bottom);

  --clock-scale:1;
  --clock-bright:1;
  --clock-glow:.8;

  --bg:#000;
  --text:#fff;
}

*{box-sizing:border-box}
html,body{
  margin:0;
  height:100%;
  background:#000;
  color:#fff;
  overflow:hidden;
  font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

/* ===== MAIN VIEWPORT ===== */
.app{
  position:fixed;
  inset:0;
  height:100dvh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  padding:calc(20px + var(--safe-top)) 20px calc(20px + var(--safe-bot));
}

/* ===== CLOCK ===== */
.clock{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  font-variant-numeric:tabular-nums;
  letter-spacing:.08em;
  text-align:center;
  transform:scale(var(--clock-scale));
  filter:brightness(var(--clock-bright));
  font-size:clamp(5rem, 18vw, 16rem);
  text-shadow:
    0 0 calc(20px * var(--clock-glow)) rgba(255,255,255,.2),
    0 0 calc(80px * var(--clock-glow)) rgba(255,255,255,.08);
  transition:.25s ease;
}

.fullscreen .clock{
  font-size:clamp(5rem, 26vw, 28rem);
  letter-spacing:.04em;
}

/* ===== TOP BAR ===== */
.top{
  position:absolute;
  top:calc(12px + var(--safe-top));
  left:16px;
  right:16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  pointer-events:none;
}

.pill, .icon{
  pointer-events:auto;
}

.pill{
  font-size:.8rem;
  padding:6px 12px;
  border-radius:999px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
}

.icon{
  width:40px;
  height:36px;
  border-radius:12px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  display:grid;
  place-items:center;
  cursor:pointer;
}

/* ===== SWIPE ZONE ===== */
.swipe-zone{
  position:absolute;
  bottom:0;
  left:0;
  right:0;
  height:70px;
  display:flex;
  justify-content:center;
  align-items:flex-end;
}

.swipe-bar{
  width:60px;
  height:6px;
  border-radius:999px;
  background:rgba(255,255,255,.25);
  margin-bottom:10px;
}

/* ===== SETTINGS SHEET ===== */
.sheet-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.5);
  backdrop-filter:blur(8px);
  display:none;
}

.sheet-overlay.show{
  display:block;
}

.sheet{
  position:absolute;
  left:0;
  right:0;
  bottom:0;
  background:rgba(20,20,20,.95);
  border-top-left-radius:28px;
  border-top-right-radius:28px;
  padding:20px;
  padding-bottom:calc(20px + var(--safe-bot));
  transform:translateY(100%);
  transition:transform .4s cubic-bezier(.22,1,.36,1);
  display:flex;
  flex-direction:column;
  max-height:90dvh;
}

.sheet-overlay.show .sheet{
  transform:translateY(0);
}

.sheet-content{
  overflow:auto;
  flex:1;
}

.section{
  margin-bottom:24px;
}

.section h3{
  font-size:.9rem;
  text-transform:uppercase;
  opacity:.7;
  margin-bottom:12px;
}

.row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:14px;
}

input[type="range"]{
  width:200px;
  accent-color:white;
}

.switch{
  width:46px;
  height:28px;
  border-radius:999px;
  background:rgba(255,255,255,.15);
  position:relative;
  cursor:pointer;
}
.switch input{display:none}
.knob{
  position:absolute;
  width:22px;
  height:22px;
  top:3px;
  left:3px;
  background:white;
  border-radius:50%;
  transition:.2s;
}
.switch input:checked + .knob{
  transform:translateX(18px);
}

.btn{
  padding:10px 14px;
  border-radius:12px;
  background:rgba(255,255,255,.12);
  border:none;
  color:white;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="app" id="app">

  <div class="top">
    <div class="pill" id="status">Ожидание</div>
    <div class="icon" id="btnSettings">⚙︎</div>
  </div>

  <div class="clock" id="clock">60:00</div>

  <div class="swipe-zone" id="swipeZone">
    <div class="swipe-bar"></div>
  </div>

</div>

<!-- SETTINGS -->
<div class="sheet-overlay" id="sheetOverlay">
  <div class="sheet" id="sheet">

    <div class="sheet-content">

      <div class="section">
        <h3>Clock</h3>

        <div class="row">
          <span>Show seconds</span>
          <label class="switch">
            <input type="checkbox" id="toggleSeconds" checked>
            <span class="knob"></span>
          </label>
        </div>

        <div class="row">
          <span>Dial size</span>
          <input type="range" id="scale" min="0.6" max="2.2" step="0.01" value="1">
        </div>

        <div class="row">
          <span>Brightness</span>
          <input type="range" id="bright" min="0.5" max="1.4" step="0.01" value="1">
        </div>

        <div class="row">
          <span>Glow</span>
          <input type="range" id="glow" min="0" max="1.5" step="0.01" value="0.8">
        </div>

        <div class="row">
          <span>Full screen mode</span>
          <button class="btn" id="fullscreenBtn">Toggle</button>
        </div>

      </div>

    </div>

  </div>
</div>

<script>
/* ===== TIMER ===== */
let total=3600;
let left=3600;
let running=false;
let interval=null;

const clock=document.getElementById("clock");
const status=document.getElementById("status");
const app=document.getElementById("app");

function formatTime(){
  const m=Math.floor(left/60);
  const s=left%60;
  if(toggleSeconds.checked){
    return String(m).padStart(2,"0")+":"+String(s).padStart(2,"0");
  }
  return String(m).padStart(2,"0");
}

function render(){
  clock.innerHTML=formatTime();
  status.textContent=running?"В работе":"Ожидание";
}

function start(){
  if(running)return;
  running=true;
  interval=setInterval(()=>{
    left--;
    if(left<=0){
      left=0;
      running=false;
      clearInterval(interval);
    }
    render();
  },1000);
}

function pause(){
  running=false;
  clearInterval(interval);
}

clock.addEventListener("click",()=>{
  running?pause():start();
});

render();

/* ===== SETTINGS ===== */
const sheetOverlay=document.getElementById("sheetOverlay");
const btnSettings=document.getElementById("btnSettings");
const swipeZone=document.getElementById("swipeZone");

function openSheet(){
  sheetOverlay.classList.add("show");
}
function closeSheet(){
  sheetOverlay.classList.remove("show");
}

btnSettings.onclick=openSheet;
sheetOverlay.onclick=e=>{
  if(e.target===sheetOverlay) closeSheet();
};

/* ===== SWIPE UP ===== */
let startY=0;
swipeZone.addEventListener("touchstart",e=>{
  startY=e.touches[0].clientY;
});
swipeZone.addEventListener("touchmove",e=>{
  const dy=e.touches[0].clientY-startY;
  if(dy<-60){
    openSheet();
  }
});

/* ===== SLIDERS ===== */
const scale=document.getElementById("scale");
const bright=document.getElementById("bright");
const glow=document.getElementById("glow");
const toggleSeconds=document.getElementById("toggleSeconds");

scale.oninput=()=>document.documentElement.style.setProperty("--clock-scale",scale.value);
bright.oninput=()=>document.documentElement.style.setProperty("--clock-bright",bright.value);
glow.oninput=()=>document.documentElement.style.setProperty("--clock-glow",glow.value);
toggleSeconds.onchange=render;

/* ===== FULL SCREEN MODE ===== */
document.getElementById("fullscreenBtn").onclick=()=>{
  app.classList.toggle("fullscreen");
};
</script>

</body>
</html>
